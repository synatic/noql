{
  "bugfix": {
    "true-false": {
      "case1": {
        "expectedResults": [
          {
            "gbName": "first",
            "ubName": "second",
            "dateAchieved": null,
            "achieved": true
          },
          {
            "gbName": "second",
            "ubName": "first",
            "dateAchieved": "2023",
            "achieved": true
          }
        ]
      }
    },
    "current-date": {
      "case1": {
        "expectedResults": [
          {
            "Today": "$date-placeholder",
            "Today2": "$date-placeholder"
          }
        ]
      }
    },
    "join-fn": {
      "case1": {
        "expectedResults": [
          {
            "names": "Max,Andy"
          }
        ]
      }
    },
    "sort-order": {
      "case1": {
        "expectedResults": [
          {
            "c": {
              "clanId": "C2",
              "userCount": 2
            }
          },
          {
            "c": {
              "clanId": "C3",
              "userCount": 1
            }
          },
          {
            "c": {
              "clanId": "C1",
              "userCount": 1
            }
          }
        ]
      },
      "case2": {
        "expectedResults": [
          {
            "clanId": "C2",
            "userCount": 2
          },
          {
            "clanId": "C3",
            "userCount": 1
          },
          {
            "clanId": "C1",
            "userCount": 1
          }
        ]
      },
      "case3": {
        "expectedResults": [
          {
            "clanId": "C2",
            "userCount": 2
          },
          {
            "clanId": "C3",
            "userCount": 1
          },
          {
            "clanId": "C1",
            "userCount": 1
          }
        ]
      }
    },
    "coalesce": {
      "case1": {
        "expectedResults": [
          {
            "Price": 0,
            "inlineValue": 3
          },
          {
            "Price": 1,
            "inlineValue": 3
          },
          {
            "Price": 0,
            "inlineValue": 3
          },
          {
            "Price": 0,
            "inlineValue": 3
          }
        ]
      }
    },
    "rank": {
      "case1": {
        "expectedResults": [
          {
            "value": "A",
            "rank_number": 1
          },
          {
            "value": "A",
            "rank_number": 1
          },
          {
            "value": "B",
            "rank_number": 3
          },
          {
            "value": "B",
            "rank_number": 3
          },
          {
            "value": "B",
            "rank_number": 3
          },
          {
            "value": "C",
            "rank_number": 6
          },
          {
            "value": "E",
            "rank_number": 7
          }
        ]
      },
      "case2": {
        "expectedResults": [
          {
            "value": "A",
            "rank_number": 1
          },
          {
            "value": "A",
            "rank_number": 1
          },
          {
            "value": "B",
            "rank_number": 3
          },
          {
            "value": "B",
            "rank_number": 3
          },
          {
            "value": "B",
            "rank_number": 3
          },
          {
            "value": "C",
            "rank_number": 6
          },
          {
            "value": "E",
            "rank_number": 7
          }
        ]
      }
    },
    "row-number": {
      "case1": {
        "expectedResults": [
          {
            "value": "A",
            "row_number": 1
          },
          {
            "value": "A",
            "row_number": 2
          },
          {
            "value": "B",
            "row_number": 3
          },
          {
            "value": "B",
            "row_number": 4
          },
          {
            "value": "B",
            "row_number": 5
          },
          {
            "value": "C",
            "row_number": 6
          },
          {
            "value": "E",
            "row_number": 7
          }
        ]
      },
      "case2": {
        "expectedResults": [
          {
            "value": "A",
            "rank_number": 1
          },
          {
            "value": "A",
            "rank_number": 2
          },
          {
            "value": "B",
            "rank_number": 1
          },
          {
            "value": "B",
            "rank_number": 2
          },
          {
            "value": "B",
            "rank_number": 3
          },
          {
            "value": "C",
            "rank_number": 1
          },
          {
            "value": "E",
            "rank_number": 1
          }
        ]
      }
    },
    "dense-rank": {
      "case1": {
        "expectedResults": [
          {
            "value": "A",
            "rank_number": 1
          },
          {
            "value": "A",
            "rank_number": 1
          },
          {
            "value": "B",
            "rank_number": 2
          },
          {
            "value": "C",
            "rank_number": 3
          },
          {
            "value": "C",
            "rank_number": 3
          },
          {
            "value": "D",
            "rank_number": 4
          },
          {
            "value": "E",
            "rank_number": 5
          }
        ]
      },
      "case2": {
        "expectedResults": [
          {
            "value": "A",
            "rank_number": 1
          },
          {
            "value": "A",
            "rank_number": 1
          },
          {
            "value": "B",
            "rank_number": 2
          },
          {
            "value": "C",
            "rank_number": 3
          },
          {
            "value": "C",
            "rank_number": 3
          },
          {
            "value": "D",
            "rank_number": 4
          },
          {
            "value": "E",
            "rank_number": 5
          }
        ]
      }
    },
    "to_objectid": {
      "case1": {
        "expectedResults": [
          {
            "_id": "61b0fdcbdee485f7c0682db6",
            "i": "61b0fdcbdee485f7c0682db6"
          }
        ]
      }
    },
    "object_to_array": {
      "case1": {
        "expectedResults": [
          {
            "id": 1,
            "test": [
              {
                "k": "Address",
                "v": "1913 Hanoi Way"
              },
              {
                "k": "City",
                "v": "Sasebo"
              },
              {
                "k": "Country",
                "v": "Japan"
              },
              {
                "k": "District",
                "v": "Nagasaki"
              }
            ]
          }
        ]
      }
    },
    "special-char-parameters": {
      "case1": {
        "expectedResults": [
          {
            "parameter": "$eq Isn't a \"bug\" `just` $ \\"
          }
        ]
      },
      "case2": {
        "expectedResults": [
          {
            "parameter": "$eq Isn't a \"bug\" `just` $ \\"
          }
        ]
      },
      "case3": {
        "expectedResults": [
          {
            "id": 2,
            "val": 52
          },
          {
            "id": 3,
            "val": 55
          }
        ]
      },
      "case4": {
        "expectedResults": [
          {
            "parameter": "$eq Isn't a \"bug\" `just` $ \\"
          }
        ]
      },
      "case5": {
        "expectedResults": [
          {
            "id": 2,
            "val": 52
          },
          {
            "id": 3,
            "val": 55
          }
        ]
      },
      "case6": {
        "expectedResults": [
          {}
        ]
      }
    },
    "schema-aware-queries": {
      "cast-json-array-to-varchar": {
        "case1": {
          "expectedResults": [
            {
              "testId": "bugfix.schema-aware-queries.cast-json-array-to-varchar.case1",
              "jsonObjValuesStr": "{\"string\":\"Testing\",\"integer\":1,\"boolean\":true,\"number\":1.5,\"nested\":{\"string\":\"Testing\",\"secondLevel\":{\"string\":\"Testing\"}},\"nestedStrArray\":[\"A\",\"b\"],\"nestedObjArray\":[{\"string\":\"Testing\",\"integer\":1},{\"string\":\"\",\"integer\":0},{\"string\":null,\"integer\":null}],\"stringOrInt\":\"asd\"}",
              "stringArrayStr": "[\"a\",\"b\"]",
              "numberArrayStr": "[1,2,3,4]",
              "jsonArrayStr": "[{\"string\":\"Testing\",\"integer\":1,\"boolean\":true,\"number\":1.5,\"nested\":{\"string\":\"Testing\",\"secondLevel\":{\"string\":\"Testing\"}}},{\"string\":\"Testing2\",\"integer\":null,\"boolean\":null,\"number\":null,\"nested\":null}]",
              "mixedArrayStr": "[{\"b\":3},\"a\",1,true,[1,2,3]]",
              "mixedPrimitiveArrayStr": "[\"a\",1,true]",
              "objOrArrayStr": "{\"bob\":\"string\"}",
              "stringOrObjectStr": "{\"value\":true}",
              "commaTestStr": "{\"string\":\"Testing\",\"integer\":1}"
            },
            {
              "testId": "bugfix.schema-aware-queries.cast-json-array-to-varchar.case2",
              "jsonObjValuesStr": "{\"string\":\"\",\"integer\":0,\"boolean\":false,\"number\":0,\"nested\":null,\"nestedStrArray\":null,\"nestedObjArray\":null,\"stringOrInt\":1}",
              "stringArrayStr": "[]",
              "numberArrayStr": "[]",
              "jsonArrayStr": null,
              "mixedArrayStr": null,
              "mixedPrimitiveArrayStr": "[]",
              "objOrArrayStr": "{\"bob\":null}",
              "stringOrObjectStr": "test",
              "commaTestStr": "{\"string\":\"Testing\",\"integer\":null}"
            },
            {
              "testId": "bugfix.schema-aware-queries.cast-json-array-to-varchar.case3",
              "jsonObjValuesStr": "{\"string\":null,\"integer\":null,\"boolean\":null,\"number\":null,\"nested\":null,\"nestedStrArray\":null,\"nestedObjArray\":null,\"stringOrInt\":null}",
              "stringArrayStr": null,
              "numberArrayStr": null,
              "jsonArrayStr": null,
              "mixedArrayStr": null,
              "mixedPrimitiveArrayStr": "[1,\"a\",true,\"b\"]",
              "objOrArrayStr": null,
              "stringOrObjectStr": "12",
              "commaTestStr": null
            },
            {
              "testId": "bugfix.schema-aware-queries.cast-json-array-to-varchar.case4",
              "jsonObjValuesStr": "{\"string\":null,\"integer\":null,\"boolean\":null,\"number\":null,\"nested\":null,\"nestedStrArray\":null,\"nestedObjArray\":null,\"stringOrInt\":null}",
              "stringArrayStr": null,
              "numberArrayStr": null,
              "jsonArrayStr": null,
              "mixedArrayStr": null,
              "mixedPrimitiveArrayStr": null,
              "objOrArrayStr": null,
              "stringOrObjectStr": null,
              "commaTestStr": null
            },
            {
              "testId": "bugfix.schema-aware-queries.cast-json-array-to-varchar.case5",
              "jsonObjValuesStr": "{\"string\":\"Testing\",\"integer\":1,\"boolean\":true,\"number\":1.5,\"nested\":false,\"nestedStrArray\":null,\"nestedObjArray\":null,\"stringOrInt\":\"asd\"}",
              "stringArrayStr": null,
              "numberArrayStr": null,
              "jsonArrayStr": null,
              "mixedArrayStr": null,
              "mixedPrimitiveArrayStr": null,
              "objOrArrayStr": null,
              "stringOrObjectStr": null,
              "commaTestStr": null
            }
          ]
        },
        "case2": {
          "expectedResults": [
            {
              "testId": "bugfix.schema-aware-queries.cast-json-array-to-varchar.case1",
              "jsonObjValuesStr": "{\"string\":\"Testing\",\"integer\":1,\"boolean\":true,\"number\":1.5,\"nested\":{\"string\":\"Testing\",\"secondLevel\":{\"string\":\"Testing\"}},\"nestedStrArray\":[\"A\",\"b\"],\"nestedObjArray\":[{\"string\":\"Testing\",\"integer\":1},{\"string\":\"\",\"integer\":0},{\"string\":null,\"integer\":null}],\"stringOrInt\":\"asd\"}"
            },
            {
              "testId": "bugfix.schema-aware-queries.cast-json-array-to-varchar.case2",
              "jsonObjValuesStr": "{\"string\":\"\",\"integer\":0,\"boolean\":false,\"number\":0,\"nested\":null,\"nestedStrArray\":null,\"nestedObjArray\":null,\"stringOrInt\":1}"
            },
            {
              "testId": "bugfix.schema-aware-queries.cast-json-array-to-varchar.case3",
              "jsonObjValuesStr": "{\"string\":null,\"integer\":null,\"boolean\":null,\"number\":null,\"nested\":null,\"nestedStrArray\":null,\"nestedObjArray\":null,\"stringOrInt\":null}"
            },
            {
              "testId": "bugfix.schema-aware-queries.cast-json-array-to-varchar.case4",
              "jsonObjValuesStr": "{\"string\":null,\"integer\":null,\"boolean\":null,\"number\":null,\"nested\":null,\"nestedStrArray\":null,\"nestedObjArray\":null,\"stringOrInt\":null}"
            },
            {
              "testId": "bugfix.schema-aware-queries.cast-json-array-to-varchar.case5",
              "jsonObjValuesStr": "{\"string\":\"Testing\",\"integer\":1,\"boolean\":true,\"number\":1.5,\"nested\":false,\"nestedStrArray\":null,\"nestedObjArray\":null,\"stringOrInt\":\"asd\"}"
            }
          ]
        },
        "case3": {
          "expectedResults": [
            {
              "subSelectStr": "{\"string\":\"Testing\",\"integer\":1,\"boolean\":true,\"number\":1.5,\"nested\":{\"string\":\"Testing\",\"secondLevel\":{\"string\":\"Testing\"}},\"nestedStrArray\":[\"A\",\"b\"],\"nestedObjArray\":[{\"string\":\"Testing\",\"integer\":1},{\"string\":\"\",\"integer\":0},{\"string\":null,\"integer\":null}],\"stringOrInt\":\"asd\"}"
            },
            {
              "subSelectStr": "{\"string\":\"\",\"integer\":0,\"boolean\":false,\"number\":0,\"nested\":null,\"nestedStrArray\":null,\"nestedObjArray\":null,\"stringOrInt\":1}"
            },
            {
              "subSelectStr": "{\"string\":null,\"integer\":null,\"boolean\":null,\"number\":null,\"nested\":null,\"nestedStrArray\":null,\"nestedObjArray\":null,\"stringOrInt\":null}"
            },
            {
              "subSelectStr": "{\"string\":null,\"integer\":null,\"boolean\":null,\"number\":null,\"nested\":null,\"nestedStrArray\":null,\"nestedObjArray\":null,\"stringOrInt\":null}"
            },
            {
              "subSelectStr": "{\"string\":\"Testing\",\"integer\":1,\"boolean\":true,\"number\":1.5,\"nested\":false,\"nestedStrArray\":null,\"nestedObjArray\":null,\"stringOrInt\":\"asd\"}"
            }
          ]
        }
      },
      "auto-cast": {
        "date-case1": {
          "expectedResults": [
            {
              "id": 2,
              "item": "pecans",
              "notes": "testing",
              "price": 20,
              "quantity": 1,
              "customerId": 2,
              "specialChars": "!!$",
              "orderDate": "$date-placeholder"
            },
            {
              "id": 5,
              "item": "potatoes",
              "price": 7,
              "quantity": 6,
              "customerId": 5,
              "specialChars": "!!*",
              "orderDate": "$date-placeholder"
            }
          ]
        },
        "date-case2": {
          "expectedResults": [
            {
              "id": 2,
              "item": "pecans",
              "notes": "testing",
              "price": 20,
              "quantity": 1,
              "customerId": 2,
              "specialChars": "!!$",
              "orderDate": "$date-placeholder"
            },
            {
              "id": 5,
              "item": "potatoes",
              "price": 7,
              "quantity": 6,
              "customerId": 5,
              "specialChars": "!!*",
              "orderDate": "$date-placeholder"
            }
          ]
        },
        "date-case3": {
          "expectedResults": [
            {
              "id": 2,
              "item": "pecans",
              "notes": "testing",
              "price": 20,
              "quantity": 1,
              "customerId": 2,
              "specialChars": "!!$",
              "orderDate": "$date-placeholder"
            },
            {
              "id": 5,
              "item": "potatoes",
              "price": 7,
              "quantity": 6,
              "customerId": 5,
              "specialChars": "!!*",
              "orderDate": "$date-placeholder"
            }
          ]
        }
      }
    },
    "subquery-capitalisation": {
      "case1": {
        "expectedResults": [
          {
            "id": 1,
            "item": "almonds"
          }
        ]
      }
    },
    "timestamp": {
      "case1": {
        "expectedResults": [
          {
            "id": 2,
            "item": "pecans",
            "notes": "testing",
            "price": 20,
            "quantity": 1,
            "customerId": 2,
            "specialChars": "!!$",
            "orderDate": "$date-placeholder"
          },
          {
            "id": 5,
            "item": "potatoes",
            "price": 7,
            "quantity": 6,
            "customerId": 5,
            "specialChars": "!!*",
            "orderDate": "$date-placeholder"
          }
        ]
      }
    },
    "large-number": {
      "case1": {
        "expectedResults": [
          {
            "First Name": "AUSTIN",
            "Last Name": "CINTRON"
          }
        ]
      }
    },
    "current_date": {
      "case1": {
        "expectedResults": [
          {
            "id": 2,
            "orderDate": "$date-placeholder"
          },
          {
            "id": 5,
            "orderDate": "$date-placeholder"
          }
        ]
      }
    },
    "unique": {
      "case1": {
        "expectedResults": [
          {
            "item": "pecans"
          },
          {
            "item": "potatoes"
          },
          {
            "item": "almonds"
          }
        ]
      }
    },
    "chain-group-by": {
      "case1": {
        "expectedResults": [
          {
            "roundSumPrice": 14,
            "customerId": 1,
            "sumRoundPrice": 14
          },
          {
            "roundSumPrice": 20,
            "customerId": 2,
            "sumRoundPrice": 20
          },
          {
            "roundSumPrice": 12,
            "customerId": 3,
            "sumRoundPrice": 12
          },
          {
            "roundSumPrice": 7,
            "customerId": 5,
            "sumRoundPrice": 7
          }
        ]
      },
      "case2": {
        "expectedResults": [
          {
            "roundSumPrice": 14,
            "customerId": 1,
            "sumRoundPrice": 14
          },
          {
            "roundSumPrice": 20,
            "customerId": 2,
            "sumRoundPrice": 20
          },
          {
            "roundSumPrice": 12,
            "customerId": 3,
            "sumRoundPrice": 12
          },
          {
            "roundSumPrice": 7,
            "customerId": 5,
            "sumRoundPrice": 7
          }
        ]
      },
      "case3": {
        "expectedResults": [
          {
            "customerId": 1,
            "avgSum": 6.75,
            "sumAvg": 13.5
          },
          {
            "customerId": 2,
            "avgSum": 20,
            "sumAvg": 20
          },
          {
            "customerId": 3,
            "avgSum": 12,
            "sumAvg": 12
          },
          {
            "customerId": 5,
            "avgSum": 7,
            "sumAvg": 7
          }
        ]
      },
      "case4": {
        "expectedResults": [
          {
            "customerId": 1,
            "minSum": 1.5,
            "sumMin": 13.5
          },
          {
            "customerId": 2,
            "minSum": 20,
            "sumMin": 20
          },
          {
            "customerId": 3,
            "minSum": 12,
            "sumMin": 12
          },
          {
            "customerId": 5,
            "minSum": 7,
            "sumMin": 7
          }
        ]
      },
      "case5": {
        "expectedResults": [
          {
            "customerId": 1,
            "subtractSum": 11,
            "sumSubtract": 11
          },
          {
            "customerId": 1,
            "subtractSum": 0.5,
            "sumSubtract": 0.5
          },
          {
            "customerId": 2,
            "subtractSum": 19,
            "sumSubtract": 19
          },
          {
            "customerId": 3,
            "subtractSum": 11,
            "sumSubtract": 11
          },
          {
            "customerId": 5,
            "subtractSum": 6,
            "sumSubtract": 6
          }
        ]
      }
    },
    "extract-dates": {
      "case1": {
        "expectedResults": [
          {
            "orderDate": "$date-placeholder",
            "year": 2021,
            "month": 7,
            "day": 23
          },
          {
            "orderDate": "$date-placeholder",
            "year": 2022,
            "month": 4,
            "day": 23
          }
        ]
      },
      "case2": {
        "expectedResults": [
          {
            "orderDate": "$date-placeholder",
            "day": 9
          },
          {
            "orderDate": "$date-placeholder",
            "day": 8
          }
        ]
      }
    },
    "sums": {
      "case1": {
        "expectedResults": [
          {
            "2023_06": 6,
            "2023_07": 7,
            "2023_08": 8,
            "2023_09": 9,
            "2023_10": 10,
            "2023_11": 11,
            "2023_12": 12
          }
        ]
      },
      "case2": {
        "expectedResults": [
          {
            "id": 3,
            "cnt": 1
          },
          {
            "id": 4,
            "cnt": 1
          },
          {
            "id": 5,
            "cnt": 1
          }
        ]
      }
    }
  },
  "scratchpad": {
    "case1": {
      "expectedResults": [
        {
          "company": {
            "id": 1,
            "item": "almonds",
            "price": 12,
            "quantity": 2,
            "customerId": 1,
            "specialChars": "^^^",
            "CName": "almonds"
          },
          "AMSCompany": {
            "id": 1,
            "sku": "almonds",
            "description": "product 1",
            "instock": 120,
            "specialChars": "^^^"
          }
        },
        {
          "company": {
            "id": 2,
            "item": "pecans",
            "notes": "testing",
            "price": 20,
            "quantity": 1,
            "customerId": 2,
            "specialChars": "!!$",
            "CName": "pecans"
          },
          "AMSCompany": {
            "id": 4,
            "sku": "pecans",
            "description": "product 4",
            "instock": 70,
            "specialChars": "!!*"
          }
        },
        {
          "company": {
            "id": 3,
            "item": "almonds",
            "price": 1.5,
            "quantity": 2,
            "customerId": 1,
            "specialChars": "^^^",
            "CName": "almonds"
          },
          "AMSCompany": {
            "id": 1,
            "sku": "almonds",
            "description": "product 1",
            "instock": 120,
            "specialChars": "^^^"
          }
        },
        {
          "company": {
            "id": 4,
            "item": "almonds",
            "price": 12,
            "quantity": 4,
            "customerId": 3,
            "specialChars": "!!\"",
            "CName": "almonds"
          },
          "AMSCompany": {
            "id": 1,
            "sku": "almonds",
            "description": "product 1",
            "instock": 120,
            "specialChars": "^^^"
          }
        },
        {
          "company": {
            "id": 5,
            "item": "potatoes",
            "price": 7,
            "quantity": 6,
            "customerId": 5,
            "specialChars": "!!*",
            "CName": "potatoes"
          }
        }
      ]
    },
    "case2": {
      "expectedResults": [
        {
          "company": {
            "id": 1,
            "item": "almonds",
            "price": 12,
            "quantity": 2,
            "customerId": 1,
            "specialChars": "^^^",
            "CName": "almonds"
          },
          "AMSCompany": {
            "id": 1,
            "sku": "almonds",
            "description": "product 1",
            "instock": 120,
            "specialChars": "^^^"
          }
        },
        {
          "company": {
            "id": 2,
            "item": "pecans",
            "notes": "testing",
            "price": 20,
            "quantity": 1,
            "customerId": 2,
            "specialChars": "!!$",
            "CName": "pecans"
          },
          "AMSCompany": {
            "id": 4,
            "sku": "pecans",
            "description": "product 4",
            "instock": 70,
            "specialChars": "!!*"
          }
        },
        {
          "company": {
            "id": 3,
            "item": "almonds",
            "price": 1.5,
            "quantity": 2,
            "customerId": 1,
            "specialChars": "^^^",
            "CName": "almonds"
          },
          "AMSCompany": {
            "id": 1,
            "sku": "almonds",
            "description": "product 1",
            "instock": 120,
            "specialChars": "^^^"
          }
        },
        {
          "company": {
            "id": 4,
            "item": "almonds",
            "price": 12,
            "quantity": 4,
            "customerId": 3,
            "specialChars": "!!\"",
            "CName": "almonds"
          },
          "AMSCompany": {
            "id": 1,
            "sku": "almonds",
            "description": "product 1",
            "instock": 120,
            "specialChars": "^^^"
          }
        },
        {
          "company": {
            "id": 5,
            "item": "potatoes",
            "price": 7,
            "quantity": 6,
            "customerId": 5,
            "specialChars": "!!*",
            "CName": "potatoes"
          }
        }
      ]
    }
  },
  "post-optimization": {
    "case1": {
      "expectedResults": [
        {
          "_id": "66261fd83316a727b53610da",
          "establishment": "662545865f01249a315ff1fd",
          "access_all_child_establishments": true,
          "establishments": [
            {
              "user": "66261fd83316a727b53610da",
              "_id": "662545865f01249a315ff1fd",
              "name": "The Primary School",
              "main_establishment": "66151d3c1985a10d08db5dce",
              "level": 1
            }
          ],
          "child_establishments": [
            {
              "_id": "662545865f01249a315ff1fd",
              "id": "662545865f01249a315ff1fd",
              "name": "The Primary School",
              "main_establishment": "66151d3c1985a10d08db5dce",
              "level": 1
            }
          ]
        }
      ]
    }
  }
}